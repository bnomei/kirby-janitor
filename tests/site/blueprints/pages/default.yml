title: Default Page
preset: page
fields:

  text:
    type: text

  kirby_clearcachepages:
    type: janitor
    command: clear:cache --name pages
    label: Kirby Clear Pages Cache

  test_whistle:
    type: janitor
    command: whistle
    label: Whistle

  test_ping:
    type: janitor
    command: ping
    label: Ping
    progress: ....
    success: Pong
    error: BAMM

  janitor_flushpages:
    type: janitor
    command: janitor:flush --name pages
    label: Janitor Flush Pages Cache

  test_uuid:
    type: janitor
    command: 'uuid --data {{ model.uuid }}'
    label: Echo the uuid

  test_unsaved:
    type: janitor
    command: whistle
    unsaved: false
    label: Disable when Page has changes

  test_autosave:
    type: janitor
    command: whistle
    autosave: true
    label: 'Safe on Click [Text = {{ page.text }}]'

  test_reload:
    type: janitor
    command: reload
    label: Reload Page Example
    # help: returns `reload => true` to janitor

  janitor_href:
    type: janitor
    command: 'janitor:open --data {{ user.panel.url }}'
    intab: true
    label: Open current user URL in new tab
    # help: returns `href => $data` to janitor

  janitor_pipedatatohref:
    type: janitor
    command: 'janitor:pipe --data {{ user.panel.url }} --to href'
    intab: true
    label: Open current user URL in new tab (via pipe)
    # help: returns `$to => $data` to janitor

  janitor_clipboardfetch:
    type: janitor
    command: 'janitor:clipboard --data {{ user.email }}'
    label: Fetch Clipboard

  janitor_clipboarddata:
    type: janitor
    command: 'janitor:clipboard --data {{ page.title }}'
    label: 'Copy "{{ page.title }}" to Clipboard'
    progress: Copied!

  janitor_download:
    type: janitor
    command: 'janitor:download --data {{ site.index.files.first.url }}'
    label: Download File Example

### =======

  # NOTE: Is better to generate thumbs via CLI / SSH / CRON
  # since most servers have 30sec php timeout for web
  janitor_thumbs:
    type: janitor
    command: thumbs page' # 'page' means only this page. could be 'site.index' or other querys without {{}}.
    label: Generate Thumbs
    process: Generating Thumbs...
